name: Release Pyth Cosmwasm Contract

on: pull_request

jobs:
  release-contract:
    name: Build and Release cosmwasm contract
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: target_chains/cosmwasm/deploy-scripts
    steps:
      - uses: actions/checkout@v2
      - name: Setup tool
        run: npm ci
      - name: Build generic cosmwasm contract
        run: |
          npm run build-contract -- --cosmwasm
      - name: Build injective cosmwasm contract
        run: |
          npm run build-contract -- --injective
      - name: Build osmosis cosmwasm contract
        run: |
          npm run build-contract -- --osmosis
