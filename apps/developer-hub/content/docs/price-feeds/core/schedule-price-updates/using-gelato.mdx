---
title: Using Gelato
description: Automate Pyth price updates with Gelato Web3 Functions
slug: /price-feeds/core/schedule-price-updates/using-gelato
---

import { Callout } from "fumadocs-ui/components/callout";
import { Step, Steps } from "fumadocs-ui/components/steps";

This guide shows how to schedule Pyth price updates with a Gelato Web3 Function. The task refreshes on-chain prices after a fixed interval or when a configured deviation threshold is exceeded.

## Introduction to Gelato

[Gelato](https://www.gelato.network/) is a decentralized backend for EVM chains that lets developers build automated, gasless, and off-chain-aware smart contracts. Web3 Functions (W3F) are decentralized cloud functions that connect contracts to off-chain computation and data sources.

## Gelato Web3 Function for Pyth

Gelato hosts a reusable Web3 Function that submits Pyth price updates based on configuration defined in a `config.yaml` file. You edit that configuration through a GitHub gist—Gelato reads it on each run and applies any changes automatically.

## Setup

<Steps>
  <Step title="Join the Web3 Functions whitelist">
    TypeScript-based Web3 Functions require whitelisting. Reach out to the Gelato team via
    [Discord](https://discord.com/invite/ApbA39BKyJ) to request access before creating your task.
  </Step>
  <Step title="Create and configure your gist">
    1. Sign in to GitHub and create a gist containing a file named `config.yaml`.
    2. Copy the [sample configuration](https://gist.github.com/swimricky/18b2a5ad9c1a605f1cf5c19ac1d2f1d9) and edit the parameters to match your environment, feeds, update frequency, and deviation thresholds. Additional examples are available in the [pyth-gelato-price-pusher repository](https://github.com/pyth-network/pyth-gelato-price-pusher).
    3. Save the gist. You can update the configuration at any time; the task will pick up changes automatically.
  </Step>
  <Step title="Create the Gelato task">
    Use the prefilled task link to deploy the Web3 Function:

    <Callout type="info" title="Prefilled Task Link">
      <a href="https://app.gelato.network/new-task?cid=QmbNPFa3ixUpphUzKJwq3F9bjC9w63FBYQ4iV3s2LpiftN">https://app.gelato.network/new-task?cid=QmbNPFa3ixUpphUzKJwq3F9bjC9w63FBYQ4iV3s2LpiftN</a>
    </Callout>

    The CID above points to the official Web3 Function hosted on IPFS. You can review the source code in the
    [pyth-gelato-price-pusher repo](https://github.com/pyth-network/pyth-gelato-price-pusher/tree/main/web3-functions/pyth-oracle-w3f-priceIds).

    When prompted:

    - Select your target network.
    - In **Task Secrets**, set `GIST_ID` to the ID portion of the gist URL you created in the previous step.
    - Complete the remaining task settings as needed.

    ![](/images/guides/gelato/task-creation-gist-id.png)

  </Step>
  <Step title="Fund the task">
    Two fee sources must be funded before execution:

    - **Gelato fees** are paid through [1Balance](https://docs.gelato.network/web3-services/1balance). After whitelisting, deposit USDC on Polygon via the [1Balance dashboard](https://app.gelato.network/1balance). These funds cover compute costs and transaction gas across supported networks. (Testnet runs are subsidized by Gelato.)
    - **Pyth fees** are paid in the native token of the chain where updates occur. Gelato deploys a `dedicatedMsgSender` proxy contract for each task creator. Transfer native tokens directly to that address on every chain you operate. You can find the address in the Gelato app under task settings.

    ![](/images/guides/gelato/deposit-usdc.png)

    ![](/images/guides/gelato/dedicated-msg-sender.png)

    <Callout type="info" title="Subscription Plans">
      Gelato’s free tier has execution limits. Review current plans at
      [app.gelato.network/1balance/subscriptions](https://app.gelato.network/1balance/subscriptions/functions?networkGroup=mainnets&type=monthly)
    </Callout>

  </Step>
  <Step title="Verify execution">
    Once the task is active, track executions from the Gelato dashboard. The interface lists recent runs, transaction hashes, and any errors.

    ![](/images/guides/gelato/task-execution.png)

  </Step>
</Steps>

## Managing Your Task

### Monitoring

Set up notifications to ensure 1Balance and `dedicatedMsgSender` balances remain funded and executions succeed:

- [1Balance Alerts](https://docs.gelato.network/web3-services/1balance/1balance-alerts)
- [Balance Alerts](https://docs.gelato.network/web3-services/web3-functions/analytics-and-monitoring)

Gelato supports alert delivery through Telegram or Discord.

### Updating Configuration

To adjust feeds or thresholds, edit the `config.yaml` gist. The task refreshes configuration based on the
`configRefreshRateInSeconds` setting, limiting GitHub requests. To confirm the latest configuration is in use, open the Gelato task details, select **Storage**, and inspect the `pythConfig` entry.

![](/images/guides/gelato/storage-pyth-config.png)

## Advanced Usage

Need deeper customization than the shared Web3 Function supports? Fork the
[pyth-gelato-price-pusher](https://github.com/pyth-network/pyth-gelato-price-pusher) repository, deploy your own Web3 Function, and create a task using its CID. Refer to the project `README.md` and the [Gelato Web3 Functions documentation](https://docs.gelato.network/web3-services/web3-functions) for deployment guidance.
