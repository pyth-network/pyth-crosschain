---
title: Error Codes
description: Complete reference of Pyth Pro error codes and troubleshooting
slug: /price-feeds/pro/error-codes
---

import { Callout } from "fumadocs-ui/components/callout";

This page provides a comprehensive reference for all error codes you may encounter when using Pyth Pro APIs, along with resolution strategies.

## WebSocket Error Codes

### Application-Level Errors

These errors are returned as JSON messages through the WebSocket connection.

| Code | Message | Cause | Resolution |
|------|---------|-------|------------|
| `UNAUTHORIZED` | Invalid or missing access token | Token is missing, expired, or invalid | Verify token, obtain new token if expired |
| `INVALID_SUBSCRIPTION` | Malformed subscription message | Request format is incorrect | Check message against [WebSocket API spec](/price-feeds/pro/api/websocket-api) |
| `INVALID_PRICE_FEED` | Unknown price feed ID | Requested price feed doesn't exist | Verify against [Price Feed IDs](/price-feeds/pro/price-feed-ids) |
| `INVALID_PROPERTY` | Unknown property requested | Property name not recognized | Check [available properties](/price-feeds/pro/api/websocket-api#available-properties) |
| `INVALID_CHANNEL` | Unknown channel type | Channel format is invalid | Use valid channel: `real_time`, `fixed_rate@Xms` |
| `RATE_LIMITED` | Too many requests | Exceeded subscription or message limits | Reduce request frequency, implement backoff |
| `SUBSCRIPTION_LIMIT` | Maximum subscriptions reached | Too many active subscriptions | Unsubscribe from unused feeds |
| `INTERNAL_ERROR` | Server-side error | Temporary server issue | Retry with exponential backoff |

### WebSocket Close Codes

These are standard WebSocket close codes you may receive when the connection closes.

| Code | Name | Meaning | Action |
|------|------|---------|--------|
| `1000` | Normal Closure | Clean disconnect initiated by client or server | None - normal behavior |
| `1001` | Going Away | Server is shutting down (e.g., deployment) | Reconnect to another endpoint |
| `1006` | Abnormal Closure | Connection lost unexpectedly | Reconnect with backoff |
| `1008` | Policy Violation | Authentication failed or policy error | Check credentials |
| `1011` | Internal Error | Unexpected server error | Reconnect with backoff |
| `4001` | Unauthorized | Access token invalid | Refresh token, then reconnect |
| `4003` | Forbidden | Insufficient permissions | Check token permissions |
| `4029` | Rate Limited | Too many connection attempts | Wait before reconnecting |

---

## REST API Error Codes

### HTTP Status Codes

| Status | Code | Description | Common Causes |
|--------|------|-------------|---------------|
| `400` | `INVALID_REQUEST` | Malformed request | Missing required parameters, invalid format |
| `401` | `UNAUTHORIZED` | Authentication failed | Missing, expired, or invalid token |
| `403` | `FORBIDDEN` | Access denied | Token lacks required permissions |
| `404` | `NOT_FOUND` | Resource not found | Invalid endpoint or price feed ID |
| `405` | `METHOD_NOT_ALLOWED` | Invalid HTTP method | Using POST instead of GET, etc. |
| `429` | `RATE_LIMITED` | Rate limit exceeded | Too many requests in time window |
| `500` | `INTERNAL_ERROR` | Server error | Temporary server issue |
| `502` | `BAD_GATEWAY` | Upstream error | Backend service unavailable |
| `503` | `SERVICE_UNAVAILABLE` | Service down | Temporary maintenance |
| `504` | `GATEWAY_TIMEOUT` | Request timeout | Backend taking too long |

### Error Response Format

All REST API errors return a JSON body:

```json
{
  "error": "ERROR_CODE",
  "message": "Human-readable description of the error",
  "details": {
    // Optional additional context
  }
}
```

---

## History Service Error Codes

| Status | Code | Description |
|--------|------|-------------|
| `400` | `INVALID_SYMBOL` | Symbol format is invalid |
| `400` | `INVALID_RESOLUTION` | Resolution not supported |
| `400` | `INVALID_TIME_RANGE` | From/to timestamps invalid |
| `404` | `SYMBOL_NOT_FOUND` | Requested symbol doesn't exist |
| `429` | `RATE_LIMITED` | Too many requests |
| `500` | `INTERNAL_ERROR` | Server error |

---

## Troubleshooting Guide

### Authentication Issues

<Callout type="error" title="UNAUTHORIZED / 401">
**Symptoms**: Connection rejected, API returns 401

**Common causes**:
1. Token not included in request
2. Token is expired
3. Token is malformed
4. Using wrong token format

**Solutions**:
```typescript
// Correct format for WebSocket (SDK)
const client = await PythLazerClient.create(endpoints, token);

// Correct format for REST
headers: {
  "Authorization": `Bearer ${token}`  // Note: "Bearer " prefix required
}
```
</Callout>

### Connection Issues

<Callout type="warning" title="Connection Drops / 1001 / 1006">
**Symptoms**: WebSocket disconnects unexpectedly

**Common causes**:
1. Server deployment (rolling restart)
2. Network instability
3. Idle timeout

**Solutions**:
1. Connect to ALL three endpoints for redundancy
2. Implement automatic reconnection with exponential backoff
3. Use the SDK which handles reconnection automatically

```typescript
// Recommended: Use SDK with all endpoints
const client = await PythLazerClient.create([
  "wss://pyth-lazer-0.dourolabs.app/v1/stream",
  "wss://pyth-lazer-1.dourolabs.app/v1/stream",
  "wss://pyth-lazer-2.dourolabs.app/v1/stream",
], token);
```
</Callout>

### Rate Limiting

<Callout type="warning" title="RATE_LIMITED / 429">
**Symptoms**: Requests rejected with rate limit error

**Common causes**:
1. Too many subscriptions
2. Too many API requests
3. Too many connection attempts

**Solutions**:
1. Implement exponential backoff
2. Reduce subscription count
3. Use WebSocket instead of polling REST
4. Cache responses when appropriate

```typescript
// Exponential backoff implementation
async function withBackoff<T>(
  fn: () => Promise<T>,
  maxRetries = 5
): Promise<T> {
  for (let attempt = 0; attempt < maxRetries; attempt++) {
    try {
      return await fn();
    } catch (error: any) {
      if (error.status !== 429 || attempt === maxRetries - 1) {
        throw error;
      }
      const delay = Math.min(1000 * Math.pow(2, attempt), 30000);
      await new Promise(r => setTimeout(r, delay));
    }
  }
  throw new Error("Max retries exceeded");
}
```
</Callout>

### Data Issues

<Callout type="info" title="Missing Price Data">
**Symptoms**: Price field absent from response

**Cause**: Price could not be computed at that moment (e.g., market closed, insufficient publishers)

**Solutions**:
1. Use last known valid price
2. Check `marketSession` field for market status
3. Wait for next update with valid price

```typescript
let lastValidPrice: number | null = null;

client.addMessageListener((message) => {
  const feed = message.value.parsed.priceFeeds[0];

  if (feed.price) {
    lastValidPrice = parseFloat(feed.price);
  }

  // Use lastValidPrice if current price is missing
  const currentPrice = feed.price
    ? parseFloat(feed.price)
    : lastValidPrice;
});
```
</Callout>

<Callout type="info" title="Invalid Price Feed ID">
**Symptoms**: INVALID_PRICE_FEED error

**Cause**: Price feed ID doesn't exist or isn't available

**Solutions**:
1. Verify ID against [Price Feed IDs](/price-feeds/pro/price-feed-ids)
2. Check the [Symbols API](https://history.pyth-lazer.dourolabs.app/history/v1/symbols) for current list
3. Ensure your subscription tier includes the requested feed
</Callout>

---

## Debugging Tips

### Enable Verbose Logging

```typescript
// Log all WebSocket messages
client.addMessageListener((message) => {
  console.log("Received:", JSON.stringify(message, null, 2));
});

// Log connection events
client.on("connected", () => console.log("Connected"));
client.on("disconnected", () => console.log("Disconnected"));
client.on("error", (error) => console.error("Error:", error));
```

### Check Response Headers

For REST API debugging, inspect response headers:

```typescript
const response = await fetch(url, { headers });

console.log("Status:", response.status);
console.log("Rate Limit Remaining:", response.headers.get("X-RateLimit-Remaining"));
console.log("Rate Limit Reset:", response.headers.get("X-RateLimit-Reset"));

const body = await response.json();
console.log("Body:", body);
```

### Validate Subscription Parameters

Before sending a subscription, validate all parameters:

```typescript
function validateSubscription(sub: SubscribeRequest) {
  const validChannels = [
    "real_time",
    "fixed_rate@1ms",
    "fixed_rate@50ms",
    "fixed_rate@200ms",
    "fixed_rate@1000ms",
  ];

  const validProperties = [
    "price", "confidence", "bestBidPrice", "bestAskPrice",
    "publisherCount", "exponent", "marketSession",
    "fundingRate", "fundingTimestamp", "fundingRateInterval",
  ];

  const validChains = ["solana", "evm", "leEcdsa", "leUnsigned"];

  if (!validChannels.includes(sub.channel)) {
    throw new Error(`Invalid channel: ${sub.channel}`);
  }

  for (const prop of sub.properties) {
    if (!validProperties.includes(prop)) {
      throw new Error(`Invalid property: ${prop}`);
    }
  }

  for (const chain of sub.chains || []) {
    if (!validChains.includes(chain)) {
      throw new Error(`Invalid chain: ${chain}`);
    }
  }
}
```

---

## Getting Help

If you're still experiencing issues after reviewing this guide:

1. Check the [Pyth Discord](https://discord.gg/pythnetwork) for community support
2. Review the [SDK source code](https://github.com/pyth-network/pyth-crosschain/tree/main/lazer/sdk/js) for implementation details
3. Contact [Pyth support](https://www.pyth.network/contact) for enterprise issues
