syntax = "proto3";

package pyth_lazer_transaction;

message PublisherUpdatePayload {
  repeated PublisherUpdate updates = 1;
  uint64 batch_timestamp_us = 2;
}

message PublisherUpdate {
  oneof update {
    PriceUpdateV1 price_update_v1 = 3;
    FundingRateUpdateV1 funding_rate_update_v1 = 4;
  }
}

message PriceUpdateV1 {
  uint32 price_feed_id = 1;
  uint64 source_timestamp_us = 2;
  uint64 publisher_timestamp_us = 3;
  optional int64 price = 4;
  optional int64 best_bid_price = 5;
  optional int64 best_ask_price = 6;
}

message FundingRateUpdateV1 {
  uint32 price_feed_id = 1;
  uint64 source_timestamp_us = 2;
  uint64 publisher_timestamp_us = 3;
  optional int64 price = 4;
  optional int64 rate = 5;
}
